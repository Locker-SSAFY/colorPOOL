### TDD란

> 서비스 코드를 작성하기 전에 테스트 코드부터 작성하는 것

TDD라는 방식을 통해 얻고자 하는 최종 목적은 `잘 동작하는 깔끔한 코드`다. 일반 소프트웨어 개발 목표와 다르게 TDD는 추가적으로 `작성된 코드가 명확한 의미를 전달`해야한다.

즉, `제대로 동작함(works)`뿐 아니라 `깔끔함 (clean)`까지도 동등한 수준의 개발 목표로 삼는다는 점이 일반적인 개발 방식과 다르다.

TDD는 사용자 입장에서 제품의 기능을 테스트하는 것이 아니라, 개발자가 작성한 메소드에 대해서 동작 테스트를 의미한다.

### 진행 방식

- 질문(Ask) : 테스트 작성을 통해 시스템에 질문한다. (테스트 수행 결과는 실패)
- 응답(Respond) : 테스트를 통과하는 코드를 작성해서 질문에 대답한다. (테스트
성공)
- 정제(Refine) : 아이디어를 통합하고, 불필요한 것은 제거하고, 모호한 것은 명확히 해서 대답을 정제한다. (리팩토링)
- 반복(Repeat) : 다음 질문을 통해 대화를 계속 진행한다

> 맞는 테스트 코드와 틀린 테스트 코드를 작성하자

### 질문(Ask)

> 어떤 테스트코드가 실패했는가?

예를 들어, 다음과 같은 테스트 메서드가 있다고 해보자

```
private void testWithdraw_잔고가_0원일_때(int money) {
  // when
  Account account = new Account();

  // given
  int remainMoney = account.getRemainMoney();
  account.withdraw(100);

  // then
  assertEquals(remainMoney - 100, account.getRemainMoney);

}

```

현재 withdraw라는 메서드는 **비어있는 상태**다. 먼저 다음과 같이 테스트코드를 작성하고 이에 맞는 내용들을 채워 나간다.

### 응답(Respond)

> 필요한 기능들을 메서드에 채운다

앞서 테스트 코드를 작성했을때 필요한 `getRemainMoney()`나 `withdraw()`에 대해 작성한다. 이 내용에 대해 테스트코드가 성공할때까지 `질문`과 `응답`을 반복한다.

### 정제(Refine)

> 코드를 리팩토링한다.

불필요한 코드를 줄이고 모호한 것은 명확하게 한다. 또한 이 과정에서 다른 질문을 생각할수도 있다.

> remainMoney가 0원 이하로 떨어질 경우 어떻게 되는가?
> Account(계좌)를 생성할 때 예치금 없이 생성할 수도 있는건가?

이러한 질문을 통해서 예외처리가 필요함을 느끼고 또다시 응답을 하는 과정이 반복된다.

### 테스트 메서드 작성 방식

- 특별히 추가 테스트가 필요 없는 기본 동작 테스트시에는 **"테스트 대상 메소드와 이름을 1:1로 일치"**
- 몇 가지 조건절 테스트가 필요한 경우에는 **"테스트 대상 메소드의 이름 뒤에 추가적인 정보를 기재"**
- 여러 메소드를 조합해서 테스트가 필요한 business 로직 테스트에는 **"테스트 시나리오에 집중"**

### 좋은 테스트 코드란?

- 하나의 테스트 코드는 외부와 독립적이어야 한다.
- 다른 테스트 코드에 영향을 주거나 받지 않아야 한다.
- 하나의 일관된 시나리오를 가지고 있어야 한다.

### Junit5

Junit5를 통해 테스트 코드를 작성한다.

- [Junit5 User Guide](https://junit.org/junit5/docs/current/user-guide/)
- [Guide to JUnit 5 Parameterized Tests](https://www.baeldung.com/parameterized-tests-junit-5)
- [A Guide to JUnit 5](https://www.baeldung.com/junit-5)

